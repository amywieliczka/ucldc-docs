---
layout: technical-doc 
title: Common Index API 
prev_section: technical-docs/index/
permalink: /docs/technical-docs/solr-api/
breadcrumbs: Common Index API
---

The UCLDC project is running a harvest of objects in collections in both the Nuxeo DAMS and other external sources such as the OAC. In the upcoming releases, we’ll be releasing an interface to register your collection for harvest. For now, this collection registry is seeded with previously identified collections. All harvested data is stored in a Solr index in a standardized metadata schema, and can be retrieved using the publicly available Solr API.

##Using the API

In order to access the Solr API, you will have to obtain an API Authentication Token. Request a token by emailing <a href="mailto:ucldc@ucop.edu">ucldc@ucop.edu</a> or your [campus contact]({{ site.url }}{{ site.baseurl }}/docs/collection-admins/). 

Queries can be made using curl, or any Solr library that supports authentication tokens: <br/>
<code>curl -H 'X-Authentication-Token: xxxx-xxxx-xxxx-xxxx' "https://registry.cdlib.org/solr/query/?q=fred"</code> 

We're using solrpy - a python library with Solr bindings - to hit Solr: [https://github.com/edsu/solrpy](https://github.com/edsu/solrpy).

The following are common query parameters. Consult the Solr documentation for a complete list of available query parameters. 

<p>
<b>q</b> - default query parameter, searches the text field by default unless a different field is otherwise specified. Takes a comma separated list of field: search_string pairs:

<ul>
  <li><code>q=*:*</code> - returns all objects in the index<br/>
      https://registry.cdlib.org/solr/query/?q=*:*&wt=json&indent=true
  </li>
  <li><code>q=mosswood park</code> - returns all objects in the index with an instance of mosswood park in their metadata<br/>
      https://registry.cdlib.org/solr/query/?q=mosswood+park&wt=json&indent=true
  </li>
  <li><code>q=title: "mosswood park", collection_name: "Parks in Oakland, California - Views"</code> - returns all objects with mosswood park in the title and a collection name of "Parks in Oakland, California - Views"<br/>
    https://registry.cdlib.org/solr/query/?q=title: "mosswood park", collection_name: "Parks in Oakland, California - Views"&wt=json&indent=true
  </li>
</ul>
</p>

<p>
<b>rows</b> - number of objects to return, default value is 10
<ul>
  <li><code>rows=6</code> - returns the first six objects in the index<br/>
      https://registry.cdlib.org/solr/query/?q=*:*&rows=6&wt=json&indent=true
  </li>
</ul>
</p>

<p>
<b>start</b> - object to start on, default value is 0 - specifying start and rows together can create pagination
<ul>
  <li><code>start=2</code> - returns the third object through the 13th in the index<br/>
      https://registry.cdlib.org/solr/query/?q=*:*&start=2&wt=json&indent=true
  </li>
</ul>
</p>

<p>
<b>fq</b> - filter the query by specifying a value for a field. Filter on the string (_ss) version of the field to avoid tokenization and provide exact matches
<ul>
  <li><code>fq=type_ss: image</code> - returns all objects with a type of 'image'<br/>
      https://registry.cdlib.org/solr/query/?q=*:*&fq=type_ss: image&wt=json&indent=true
  </li>
</ul>
</p>

<p>
<b>facet</b> - true|false
</p>

<p>
<b>facet_limit</b> - number of facets to return (set to -1 to display all facets)
</p>

<p>
<b>facet_field</b> - fields to return facets for (ex: collection_name)
</p>

##The Solr Fields
***
This scheme is still undergoing active development. Find the most up-to-date scheme on GitHub: <a href="https://github.com/ucldc/solr_api/blob/master/dc-collection/conf/schema.xml" target="_blank">github.com/ucldc/solr_api/</a>.

* <b>Name</b>: indicates the field name
* <b>Type</b>: indicates the field type
* <b>Comments</b>: notes regarding use of the field
* <b>Multi-valued</b>: indicates if field is repeatable
* <b>Indexed</b>: indicates if the value of the field can be used in queries to retrieve matching documents
* <b>Stored</b>: indicates if the value of the field is stored in the index, and the value of the field can be retrieved by queries


| Name                                                                                                                                                           | Type             | Comments                                                                                                                                                                                                                                                                        | Multi-Valued | Indexed? | Stored? |
|----------------------------------------------------------------------------------------------------------------------------------------------------------------|------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|--------------|----------|---------|
| General and administrative fields                                                                                                                              |                  |                                                                                                                                                                                                                                                                                 |              |          |         |
| created                                                                                                                                                        | date             | refers to creation of the metadata document, not creation of the Solr document, nor creation of the content object                                                                                                                                                              | no           | yes      | yes     |
| created_s                                                                                                                                                      | string           | string variant of created for wildcard searching                                                                                                                                                                                                                                | no           | yes      | yes     |
| id                                                                                                                                                             | string           | Unique identifier assigned by CDL to the object, derived from identifier (if the value is an ARK) or otherwise auto-generated. This value also is also used within the context of the URL for the object in Calisphere.                                                         | no           | yes      | yes     |
| last_modified                                                                                                                                                  | date             | refers to the date the metadata document was last modified                                                                                                                                                                                                                      | no           | yes      | yes     |
| last_modified_s                                                                                                                                                | string           | string variant of last_modified for wildcard searching                                                                                                                                                                                                                          | no           | yes      | yes     |
| text                                                                                                                                                           | text_general     | not stored; catchall text field for keyword search that indexes tokens - for each object, contains the following fields: title, contributor, creator, coverage, date, description, extent, format, identifier, language, publisher, relation, rights, source, subject, and type | yes          | yes      | no      |
| text_rev                                                                                                                                                       | text_general_rev | not stored; the same as the text field, but in reverse for efficient leading wildcard queries                                                                                                                                                                                   | yes          | yes      | no      |
| timestamp                                                                                                                                                      | date             | timestamp on the Solr document - default value is NOW, ie the time of object creation in the Solr index.                                                                                                                                                                        | no           | yes      | yes     |
| Metadata fields (supplied through the Collection Registry; all multivalued so an object can be related to more than one Campus, Repository, and/or Collection) |                  |                                                                                                                                                                                                                                                                                 |              |          |         |
| campus                                                                                                                                                         | string           | campus stores the URL to the registry API campus object                                                                                                                                                                                                                         | yes          | yes      | yes     |
| campus_data                                                                                                                                                    | string           | campus_name::campus_url                                                                                                                                                                                                                                                         | yes          | yes      | yes     |
| campus_name                                                                                                                                                    | string           | campus_name stores the name of the campus, so that clients don’t need to look up against the registry API                                                                                                                                                                       | yes          | yes      | yes     |
| campus_url                                                                                                                                                     | string           | campus_url stores the URL to the registry API campus object                                                                                                                                                                                                                     | yes          | yes      | yes     |
| collection_data                                                                                                                                                | string           | collection_url::collection_name                                                                                                                                                                                                                                                 | yes          | yes      | yes     |
| collection_name                                                                                                                                                | string           | collection_name stores the name of the collection, so that clients don’t need to look up against the registry API                                                                                                                                                               | yes          | yes      | yes     |
| collection_url                                                                                                                                                 | string           | collection stores the URL to the registry API collection object                                                                                                                                                                                                                 | yes          | yes      | yes     |
| repository_data                                                                                                                                                | string           | repository_url::repository_name                                                                                                                                                                                                                                                 | yes          | yes      | yes     |
| repository_name                                                                                                                                                | string           | repository_name stores the name of the repository, so that clients don’t need to look up against the registry API                                                                                                                                                               | yes          | yes      | yes     |
| repository_url                                                                                                                                                 | string           | repository stores the URL to the registry API repository object                                                                                                                                                                                                                 | yes          | yes      | yes     |
| sort_collection_data                                                                                                                                           | string           | collection data with a normalized collection name for sorting                                                                                                                                                                                                                   | yes          | yes      | yes     |
| Metadata fields (stored and indexed as tokenized text)                                                                                                         |                  |                                                                                                                                                                                                                                                                                 |              |          |         |
| alternative_title                                                                                                                                              | text_general     |                                                                                                                                                                                                                                                                                 | yes          | yes      | yes     |
| contributor                                                                                                                                                    | text_general     |                                                                                                                                                                                                                                                                                 | yes          | yes      | yes     |
| coverage                                                                                                                                                       | text_general     |                                                                                                                                                                                                                                                                                 | yes          | yes      | yes     |
| creator                                                                                                                                                        | text_general     |                                                                                                                                                                                                                                                                                 | yes          | yes      | yes     |
| date                                                                                                                                                           | text_general     |                                                                                                                                                                                                                                                                                 | yes          | yes      | yes     |
| description                                                                                                                                                    | text_general     |                                                                                                                                                                                                                                                                                 | yes          | yes      | yes     |
| extent                                                                                                                                                         | text_general     |                                                                                                                                                                                                                                                                                 | yes          | yes      | yes     |
| facet_decade                                                                                                                                                   | string           |                                                                                                                                                                                                                                                                                 | yes          | yes      | yes     |
| format                                                                                                                                                         | text_general     |                                                                                                                                                                                                                                                                                 | yes          | yes      | yes     |
| genre                                                                                                                                                          | text_general     |                                                                                                                                                                                                                                                                                 | yes          | yes      | yes     |
| identifier                                                                                                                                                     | text_general     |                                                                                                                                                                                                                                                                                 | yes          | yes      | yes     |
| language                                                                                                                                                       | text_general     |                                                                                                                                                                                                                                                                                 | yes          | yes      | yes     |
| location                                                                                                                                                       | text_general     |                                                                                                                                                                                                                                                                                 | yes          | yes      | yes     |
| provenance                                                                                                                                                     | text_general     |                                                                                                                                                                                                                                                                                 | yes          | yes      | yes     |
| publisher                                                                                                                                                      | text_general     |                                                                                                                                                                                                                                                                                 | yes          | yes      | yes     |
| relation                                                                                                                                                       | text_general     |                                                                                                                                                                                                                                                                                 | yes          | yes      | yes     |
| rights                                                                                                                                                         | text_general     |                                                                                                                                                                                                                                                                                 | yes          | yes      | yes     |
| rights_holder                                                                                                                                                  | text_general     |                                                                                                                                                                                                                                                                                 | yes          | yes      | yes     |
| rights_note                                                                                                                                                    | text_general     |                                                                                                                                                                                                                                                                                 | yes          | yes      | yes     |
| rights_date                                                                                                                                                    | text_general     |                                                                                                                                                                                                                                                                                 | yes          | yes      | yes     |
| sort_date_start                                                                                                                                                | date             |                                                                                                                                                                                                                                                                                 | no           | yes      | yes     |
| sort_date_end                                                                                                                                                  | date             |                                                                                                                                                                                                                                                                                 | no           | yes      | yes     |
| sort_title                                                                                                                                                     | alphaSpaceSort   | Version of title used for lexical ordering                                                                                                                                                                                                                                      | no           | yes      | yes     |
| source                                                                                                                                                         | text_general     |                                                                                                                                                                                                                                                                                 | yes          | yes      | yes     |
| subject                                                                                                                                                        | text_general     |                                                                                                                                                                                                                                                                                 | yes          | yes      | yes     |
| temporal                                                                                                                                                       | text_general     |                                                                                                                                                                                                                                                                                 | yes          | yes      | yes     |
| transcription                                                                                                                                                  | text_general     |                                                                                                                                                                                                                                                                                 | yes          | yes      | yes     |
| title                                                                                                                                                          | text_general     | only required field                                                                                                                                                                                                                                                             | yes          | yes      | yes     |
| type                                                                                                                                                           | text_general     |                                                                                                                                                                                                                                                                                 | yes          | yes      | yes     |
| Content file fields                                                                                                                                            |                  |                                                                                                                                                                                                                                                                                 |              |          |         |
| url_item                                                                                                                                                       | string           | best guess at home url for the item. Filled in by akara? currently indexed to search for items with it filled in, but will likely not be indexed in final release                                                                                                               | no           | yes      | yes     |
| reference_image_dimensions                                                                                                                                     | string           | Pixel width:height.                                                                                                                                                                                                                                                             | no           | yes      | yes     |
| reference_image_md5                                                                                                                                            | string           | not indexed; holds the md5 of the best image found for image objects this will then be passed to the thumbnail server for nicely sized images. For now you can use md5s3stash to calculate url to image                                                                         | no           | yes      | yes     |
| structmap_text                                                                                                                                                 | string           |                                                                                                                                                                                                                                                                                 | no           | yes      | no      |
| structmap_url                                                                                                                                                  | string           | Only present for “deep content” (nuxeo harvested items)                                                                                                                                                                                                                         |              |          |         |
| https://github.com/ucldc/ucldc-docs/wiki/media.json                                                                                                            |                  |                                                                                                                                                                                                                                                                                 |              |          |         |
| no                                                                                                                                                             | yes              | yes                                                                                                                                                                                                                                                                             |              |          |         |
| Metadata fields (stored and indexed as strings, instead of tokenized text)                                                                                     |                  |                                                                                                                                                                                                                                                                                 |              |          |         |
| alternative_title_ss                                                                                                                                           | text_general     |                                                                                                                                                                                                                                                                                 | yes          | yes      | yes     |
| contributor_ss                                                                                                                                                 | text_general     |                                                                                                                                                                                                                                                                                 | yes          | yes      | yes     |
| coverage_ss                                                                                                                                                    | text_general     |                                                                                                                                                                                                                                                                                 | yes          | yes      | yes     |
| creator_ss                                                                                                                                                     | text_general     |                                                                                                                                                                                                                                                                                 | yes          | yes      | yes     |
| date_ss                                                                                                                                                        | text_general     |                                                                                                                                                                                                                                                                                 | yes          | yes      | yes     |
| description_ss                                                                                                                                                 | text_general     |                                                                                                                                                                                                                                                                                 | yes          | yes      | yes     |
| extent_ss                                                                                                                                                      | text_general     |                                                                                                                                                                                                                                                                                 | yes          | yes      | yes     |
| format_ss                                                                                                                                                      | text_general     |                                                                                                                                                                                                                                                                                 | yes          | yes      | yes     |
| genre_ss                                                                                                                                                       | text_general     |                                                                                                                                                                                                                                                                                 | yes          | yes      | yes     |
| identifier_ss                                                                                                                                                  | text_general     |                                                                                                                                                                                                                                                                                 | yes          | yes      | yes     |
| language_ss                                                                                                                                                    | text_general     |                                                                                                                                                                                                                                                                                 | yes          | yes      | yes     |
| location_ss                                                                                                                                                    | text_general     |                                                                                                                                                                                                                                                                                 | yes          | yes      | yes     |
| provenance_ss                                                                                                                                                  | text_general     |                                                                                                                                                                                                                                                                                 | yes          | yes      | yes     |
| publisher_ss                                                                                                                                                   | text_general     |                                                                                                                                                                                                                                                                                 | yes          | yes      | yes     |
| relation_ss                                                                                                                                                    | text_general     |                                                                                                                                                                                                                                                                                 | yes          | yes      | yes     |
| rights_ss                                                                                                                                                      | text_general     |                                                                                                                                                                                                                                                                                 | yes          | yes      | yes     |
| rights_holder_ss                                                                                                                                               | text_general     |                                                                                                                                                                                                                                                                                 | yes          | yes      | yes     |
| rights_note_ss                                                                                                                                                 | text_general     |                                                                                                                                                                                                                                                                                 | yes          | yes      | yes     |
| rights_date_ss                                                                                                                                                 | text_general     |                                                                                                                                                                                                                                                                                 | yes          | yes      | yes     |
| source_ss                                                                                                                                                      | text_general     |                                                                                                                                                                                                                                                                                 | yes          | yes      | yes     |
| subject_ss                                                                                                                                                     | text_general     |                                                                                                                                                                                                                                                                                 | yes          | yes      | yes     |
| temporal_ss                                                                                                                                                    | text_general     |                                                                                                                                                                                                                                                                                 | yes          | yes      | yes     |
| transcription_ss                                                                                                                                               | text_general     |                                                                                                                                                                                                                                                                                 | yes          | yes      | yes     |
| title_ss                                                                                                                                                       | text_general     | only required field                                                                                                                                                                                                                                                             | yes          | yes      | yes     |
| type_ss                                                                                                                                                        | text_general     |                                                                                                                                                                                                                                                                                 | yes          | yes      | yes     |

